<div id="admin_dashboard__content" class="col-lg-9">
	<div class="order-container">
		<div class="order-control">
			<h4>Danh sách đơn hàng</h4>
			<div class="order-filter ">
				<input class="filter" type="text" placeholder="Tìm theo ID đơn hàng">
				<input class="filter" type="text" placeholder="Tìm theo ID khách hàng">
				<div class="dropdown filter p-0 d-inline">
					<button class="btn btn-dropdown dropdown-toggle m-0  bg-white text-black" type="button"
						id="defaultDropdown" data-bs-toggle="dropdown" data-bs-auto-close="true" aria-expanded="false">
						Trạng thái
					</button>
					<ul class="dropdown-menu dropdown-menu-right" aria-labelledby="defaultDropdown">
						<li><a class="dropdown-item" href="#">Mới</a></li>
						<li><a class="dropdown-item" href="#">Đã xác nhận </a></li>
						<li><a class="dropdown-item" href="#">Đang giao </a></li>
						<li><a class="dropdown-item" href="#">Đã giao </a></li>
					</ul>
				</div>
			</div>
			<div class="btn-list ">
				<button class="btn-lighter ">Làm mới</button>
				<button class="btn-purple ">Áp dụng</button>
				<button class="btn-purple ">Xuất excel</button>
			</div>
		</div>
		<div class="order-list ">
			<table class="table table-striped order-table ">
				<thead>
					<tr>
						<th scope="col " class="id">ID</th>
						<th scope="col " class="id">ID_KH</th>
						<th scope="col ">Thanh toán</th>
						<th scope="col ">Tổng tiền</th>
						<th scope="col ">Ngày mua</th>
						<th scope="col ">Trạng thái</th>
						<th scope="col ">Thao tác</th>
					</tr>
				</thead>
				<tbody id="table_content">
					{{#each orders}}
					<tr>
						<td>{{this._id}}</th>
						<td>{{this.customer_id}}</td>
						<td>{{booleanToPayment this.payment}}</td>
						<td>{{intToMoney this.total}}</td>
						<td>{{timeToString this.date}}</td>
						<td>
							<button class="button {{ this.status}}   status ">{{stringToStatus this.status}}</button>
						</td>
						<td>
							<a href="#" type="button" data-toggle="modal" data-target="#settingOrder"
								data-id="{{this._id}}" data-name="{{this.customer_name}}"
								data-email="{{this.customer_email}}" data-phone="{{this.customer_phone}}"
								data-address="{{this.customer_address}}" data-payment="{{this.payment}}"
								data-status="{{this.status}}">
								<i class="fa-solid fa-edit"></i>
							</a>
							<i class="fa-solid fa-trash ml-1 d-inline text-secondary"></i>
						</td>
					</tr>
					{{/each}}
				</tbody>
			</table>
		</div>
	</div>

	<!-- Edit don hang modal -->
	<div class="modal fade" id="settingOrder" tabindex="-1" role="dialog" aria-labelledby="settingOrderTitle"
		aria-hidden="true">
		<div class="modal-dialog modal-lg" role="document">
			<div class="modal-content">
				<div class="modal-header">
					<h2 class="modal-title" id="settingOrderTitle">
						Chỉnh sửa đơn hàng
					</h2>
					<button type="button" class="close" data-dismiss="modal" aria-label="Close">
						<span aria-hidden="true">&times;</span>
					</button>
				</div>
				<div class="modal-body order_modal">
					<form id="updateOrderForm" method="post">
						<div class="row editDonHang_topHalf pt-3">
							<div class="col-12 col-md-6 editDonHang_topHalf_left px-0 px-md-2">
								<h6>Thông tin liên hệ khách hàng</h6>
								<div>
									<div>
										<p>Tên khách hàng</p>
										<input type="text" name="customer_name" id="inputUpdateName" placeholder="Name"
											required>
									</div>
									<div>
										<p>Địa chỉ email</p>
										<input type="email" name="customer_email" id="inputUpdateEmail"
											placeholder="Email" required>
									</div>
									<div>
										<p>Số điện thoại</p>
										<input type="text" name="customer_phone" id="inputUpdatePhone"
											placeholder="Phone" required>
									</div>
								</div>
							</div>

							<div class="col-12 col-md-6 editDonHang_topHalf_right px-0 pt-2 pt-md-0">
								<div>
									<h6>Hình thức thanh toán</h6>
									<div>
										<p>Hình thức thanh toán</p>
										<div class="btn-group">
											<select class="btn dropdown-toggle" type="button" name="payment"
												id="inputUpdatePayment" data-toggle="dropdown" aria-haspopup="true"
												aria-expanded="false">
												<option value="true">Tiền mặt</a>
												<option value="false">Chuyển khoản</a>
											</select>
										</div>
									</div>
								</div>

								<div>
									<h6>Trạng thái đơn hàng</h6>
									<div>
										<p>Trạng thái</p>
										<div class="btn-group">
											<select class="btn dropdown-toggle" type="button" id="inputUpdateStatus"
												name="status" data-toggle="dropdown" aria-haspopup="true"
												aria-expanded="false">
												<option value="new">Mới</option>
												<option value="confirmed">Đã xác nhận</option>
												<option value="delivering">Đang giao</option>
												<option value="delivered">Đã giao</option>
											</select>
										</div>
									</div>
								</div>
							</div>
						</div>

						<div class="editDonHang_middle col-12 mx-2 px-md-2">
							<h6 class="mb-3">Sản phẩm</h6>
							<div class="overflow-auto">
								<table class="table table-striped table-hover">
									<thead>
										<tr>
											<th scope="col">Mã</th>
											<th scope="col">Hình ảnh</th>
											<th scope="col">Tên sản phẩm</th>
											<th scope="col">Giá</th>
											<th scope="col">Danh mục</th>
											<th scope="col">Số lượng</th>
										</tr>
									</thead>
									<tbody id="orderProductTableBody">

									</tbody>
								</table>
							</div>
						</div>

						<div class="editDonHang_bottomHalf">
							<h6>Thông tin liên hệ khách hàng</h6>
							<div>
								<div class="row">
									<p>Địa chỉ giao hàng</p>
									<input type="text" name="customer_address" id="inputUpdateAddress"
										placeholder="Addres" required>
								</div>
							</div>
						</div>

						<div class="modal-footer">
							<button type="submit" class="btn-default" id="btnUpdateOrder">
								Cập nhật
							</button>
							<button type="button" class="btn btn-danger" data-dismiss="modal">
								Huỷ đơn hàng
							</button>
						</div>
					</form>
				</div>


			</div>
		</div>
	</div>
	<!-- Edit don hang modal -->
</div>

<script>
	const orders_products = JSON.parse(`{{{ json orders_products }}}`);
	const products = JSON.parse(`{{{ json products }}}`);
	const categories = JSON.parse(`{{{ json categories }}}`);
</script>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/js/bootstrap.bundle.min.js"
	integrity="sha384-pprn3073KE6tl6bjs2QrFaJGz5/SUsLqktiwsUTF55Jfv3qYSDhgCecCxMW52nD2"
	crossorigin="anonymous"></script>

<script src="/js/donhang.js"></script>